<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>ALUBA VIP ELITE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        body { margin: 0; background: #0a0a0a; color: #fff; font-family: 'Courier New', monospace; overflow: hidden; }
        canvas { display: block; background: #1a1a1a; cursor: crosshair; }
        .ui-main { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10; }
        .menu-card { background: rgba(0,0,0,0.95); border: 4px solid #ff0000; padding: 25px; border-radius: 15px; text-align: center; pointer-events: auto; width: 350px; box-shadow: 0 0 40px #f00; }
        .btn-action { background: #f00; color: #fff; border: none; padding: 15px; margin: 10px 0; cursor: pointer; width: 100%; font-weight: bold; font-size: 16px; border-radius: 5px; }
        .vip-gold { border-color: #ffd700 !important; box-shadow: 0 0 60px #ffd700 !important; }
        #vip-chicken { position: fixed; bottom: -500px; left: 50%; transform: translateX(-50%); width: 280px; transition: 0.8s; z-index: 100; pointer-events: none; }
        .show-chick { bottom: -20px !important; }
        #hud { position: absolute; top: 20px; left: 20px; font-size: 20px; color: #f00; font-weight: bold; }
    </style>
</head>
<body>

<div id="hud"></div>
<canvas id="game"></canvas>

<img id="vip-chicken" src="https://media1.tenor.com/m/hS9vS4nU6YFpS/chicken-glasses.gif">

<div class="ui-main">
    <div class="menu-card" id="card">
        <h1 id="title" style="margin:0; font-size: 2em;">ALUBA ARENA</h1>
        <p id="info">–£–ë–ï–ô –í–°–ï–• üòµ (3 –†–ê–£–ù–î–ê)</p>
        <button class="btn-action" onclick="startGame('shooter')">–ò–ì–†–ê–¢–¨ –í –®–£–¢–ï–†</button>
        <button class="btn-action" style="background: #333;" onclick="startGame('banana')">–ë–ê–ù–ê–ù-–í–´–ñ–ò–í–ê–ù–ò–ï</button>
        <hr style="border: 0.5px solid #444;">
        <button id="dl-btn" class="btn-action" style="background:#222;" onclick="download(false)">–°–ö–ê–ß–ê–¢–¨ ALUBA MOD</button>
    </div>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const hud = document.getElementById('hud');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let mode = null;
let round = 0;
let enemies = [];
let allies = [];
let isVip = false;

function spawnEntities() {
    enemies = []; allies = [];
    // –¢–µ—Ä—Ä–æ—Ä–∏—Å—Ç—ã
    for(let i=0; i < 5 + round; i++) {
        enemies.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, hp: 100, v: 2 });
    }
    // –¢–≤–æ—è –∫–æ–º–∞–Ω–¥–∞
    for(let i=0; i < 3; i++) {
        allies.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, hp: 100 });
    }
}

function startGame(m) {
    mode = m; round = 0;
    document.querySelector('.ui-main').style.display = 'none';
    spawnEntities();
    animate();
}

canvas.addEventListener('mousedown', (e) => {
    if(mode !== 'shooter') return;
    enemies.forEach((en, index) => {
        const dist = Math.hypot(en.x - e.clientX, en.y - e.clientY);
        if(dist < 40) {
            en.hp -= 50;
            if(en.hp <= 0) enemies.splice(index, 1);
        }
    });

    if(enemies.length === 0) {
        round++;
        if(round >= 3) winAll();
        else spawnEntities();
    }
});

function winAll() {
    mode = null;
    document.querySelector('.ui-main').style.display = 'flex';
    document.getElementById('card').classList.add('vip-gold');
    document.getElementById('title').innerText = "VIP ALUBA UNLOCKED";
    document.getElementById('title').style.color = "gold";
    document.getElementById('vip-chicken').classList.add('show-chick');
    const b = document.getElementById('dl-btn');
    b.innerText = "–°–ö–ê–ß–ê–¢–¨ VIP MOD .JAR";
    b.style.background = "gold"; b.style.color = "#000";
    b.onclick = () => download(true);
}

function animate() {
    if(!mode) return;
    ctx.fillStyle = '#111'; ctx.fillRect(0,0,canvas.width, canvas.height);
    
    hud.innerText = `–†–ê–£–ù–î: ${round + 1} | –¶–ï–õ–ò: ${enemies.length}`;

    // –†–∏—Å—É–µ–º —Å–æ—é–∑–Ω–∏–∫–æ–≤ üëÆ
    allies.forEach(al => {
        ctx.font = "40px Arial";
        ctx.fillText("üëÆ", al.x, al.y);
        al.x += Math.sin(Date.now()/500)*2;
    });

    // –†–∏—Å—É–µ–º –≤—Ä–∞–≥–æ–≤ üòµ
    enemies.forEach(en => {
        ctx.font = "40px Arial";
        ctx.fillText("üòµ", en.x, en.y);
        en.x += (Math.random()-0.5)*10;
        en.y += (Math.random()-0.5)*10;
    });

    requestAnimationFrame(animate);
}

function download(vip) {
    const zip = new JSZip();
    zip.file("META-INF/mods.toml", `modLoader="javafml"\n[[mods]]\nmodId="alubamod"\ndisplayName="${vip?'VIP':'Regular'}"`);
    zip.file("pack.mcmeta", `{"pack":{"description":"Aluba","pack_format":6}}`);
    const b64 = "yv66vgAAADQASQoACQAbBwAcBwAdCgAJAB4IAB8KAAkAKAgAKQoAAgAqBwArBwAsCgACAC0IAC4KAAIAMAcAMQcAMgEABjxpbml0PgEAAygpVgEABENvZGUBAA9MaW5lTnVtYmVyVGFibGUBABJvblJlbmRlckNyb3NzaGFpcgEAKChMbmV0L21pbmVjcmFmdGZvcmdlL2NsaWVudC9ldmVudC9SZW5kZXJHYW1lT3ZlcmxheUV2ZW50JFByZTspVgEADG9uUmVuZGVyTmFtZQEAKChMbmV0L21pbmVjcmFmdGZvcmdlL2NsaWVudC9ldmVudC9SZW5kZXJOYW1lcGxhdGVFdmVudDspVgEAClNvdXJjZUZpbGUBAA5BbHViYU1haW4uamF2YQwACgALBwAzDAA0ADUHADYMADAANQwAOAA5BwA6DAA7ADwBAAhBTFVCQS1QVlAHAAMBAA9jb20vYWx1YmEvcHZwL0FsdWJhTWFpbgEAEGphdmEvbGFuZy9PYmplY3QBABBvcmcvbGp3Z2wvb3BlbmdsL0dMMTEBABJnbEVuYWJsZQEAEmdsSGludAEAEWdsTGluZVNtb290aEhPVA==";
    zip.file("com/aluba/Main.class", Uint8Array.from(atob(b64), c => c.charCodeAt(0)));
    zip.generateAsync({type:"blob"}).then(b => {
        const a = document.createElement('a'); a.href = URL.createObjectURL(b);
        a.download = vip ? "AlubaVIP.jar" : "AlubaPVP.jar"; a.click();
    });
}
</script>
</body>
</html>
