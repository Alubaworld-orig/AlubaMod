<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>ALUBA HARDCORE ARENA</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: 'Arial Black', sans-serif; overflow: hidden; }
        #gameCanvas { display: block; cursor: crosshair; }
        .ui { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .menu { background: rgba(0,0,0,0.9); border: 5px solid #f00; padding: 30px; border-radius: 20px; pointer-events: auto; text-align: center; min-width: 300px; box-shadow: 0 0 50px #f00; }
        .btn { background: #f00; color: #fff; border: none; padding: 15px; margin: 10px; cursor: pointer; font-weight: bold; width: 100%; border-radius: 10px; }
        .vip-gold { border-color: #ffd700 !important; box-shadow: 0 0 50px #ffd700 !important; }
        #chicken-vip { position: fixed; bottom: -500px; left: 50%; transform: translateX(-50%); width: 250px; transition: 1s; z-index: 1000; }
        .active-chick { bottom: 0 !important; }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<img id="chicken-vip" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbnY5cXp4YndxeXByZW56eGZidGRqZ3Z0YXN3ZzJmcXN6Z3Z0YXN3ZyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/hS9vS4nU6YFpS/giphy.gif">

<div class="ui">
    <div class="menu" id="menu">
        <h1 id="title" style="color:red; margin:0;">ALUBA ARENA</h1>
        <p id="stats">–†–ê–£–ù–î–´: 0/3</p>
        <button class="btn" onclick="startTeamShooter()">SHOOTER (3 –†–ê–£–ù–î–ê)</button>
        <button class="btn" style="background:#ffd700; color:#000;" onclick="startBananaFootball()">BANANA FOOTBALL</button>
        <hr>
        <button id="dl-btn" class="btn" style="background:#333;" onclick="getMod(false)">–°–ö–ê–ß–ê–¢–¨ –ú–û–î</button>
    </div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let mode = 'menu';
let roundsWon = 0;
let entities = [];
let ball = { x: 0, y: 0, dx: 0, dy: 0 };
let player = { x: 0, y: 0 };

function getMod(vip) {
    const zip = new JSZip();
    zip.file("META-INF/mods.toml", `modLoader="javafml"\n[[mods]]\nmodId="alubamod"\ndisplayName="${vip?'VIP':'Regular'}"`);
    zip.file("pack.mcmeta", `{"pack":{"description":"Aluba","pack_format":6}}`);
    zip.generateAsync({type:"blob"}).then(b => {
        const a = document.createElement('a'); a.href = URL.createObjectURL(b);
        a.download = vip ? "AlubaVIP.jar" : "AlubaPVP.jar"; a.click();
    });
}

function startTeamShooter() {
    mode = 'shooter'; roundsWon = 0; 
    document.getElementById('menu').style.display = 'none';
    nextRound();
}

function nextRound() {
    entities = [];
    // –ö–æ–º–∞–Ω–¥–∞ üòµ (–í—Ä–∞–≥–∏)
    for(let i=0; i<5; i++) entities.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, type:'enemy', dead: false});
    // –ö–æ–º–∞–Ω–¥–∞ üëÆ (–°–æ—é–∑–Ω–∏–∫–∏ - –±–æ—Ç—ã)
    for(let i=0; i<3; i++) entities.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, type:'ally', dead: false});
}

function startBananaFootball() {
    mode = 'football'; roundsWon = 0;
    document.getElementById('menu').style.display = 'none';
    ball = { x: canvas.width/2, y: canvas.height/2, dx: 5, dy: 5 };
    player = { x: canvas.width/2, y: canvas.height - 50 };
}

canvas.addEventListener('click', (e) => {
    if(mode === 'shooter') {
        entities.forEach(en => {
            const dist = Math.hypot(en.x - e.clientX, en.y - e.clientY);
            if(dist < 30 && en.type === 'enemy' && !en.dead) {
                en.dead = true;
                if(entities.filter(ent => ent.type === 'enemy' && !ent.dead).length === 0) {
                    roundsWon++;
                    if(roundsWon >= 3) finishGame();
                    else nextRound();
                }
            }
        });
    }
});

function finishGame() {
    mode = 'menu';
    document.getElementById('menu').style.display = 'block';
    document.getElementById('menu').classList.add('vip-gold');
    document.getElementById('title').innerText = "VIP ALUBA UNLOCKED";
    document.getElementById('title').style.color = "gold";
    document.getElementById('chicken-vip').classList.add('active-chick');
    const b = document.getElementById('dl-btn');
    b.innerText = "–°–ö–ê–ß–ê–¢–¨ VIP –ú–û–î"; b.style.background = "gold"; b.style.color = "#000";
    b.onclick = () => getMod(true);
}

function update() {
    ctx.fillStyle = '#111'; ctx.fillRect(0,0,canvas.width, canvas.height);

    if(mode === 'shooter') {
        ctx.fillStyle = "white"; ctx.fillText("–†–ê–£–ù–î–û–í –í–´–ò–ì–†–ê–ù–û: " + roundsWon + "/3", 20, 30);
        entities.forEach(en => {
            if(!en.dead) {
                ctx.font = "30px Arial";
                ctx.fillText(en.type === 'enemy' ? "üòµ" : "üëÆ", en.x, en.y);
                // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è
                en.x += (Math.random()-0.5)*5; en.y += (Math.random()-0.5)*5;
            }
        });
    }

    if(mode === 'football') {
        ctx.fillStyle = "yellow"; ctx.font = "40px Arial"; ctx.fillText("üçå", ball.x, ball.y);
        ctx.fillStyle = "blue"; ctx.fillRect(player.x - 50, player.y, 100, 20); // –ò–≥—Ä–æ–∫
        
        ball.x += ball.dx; ball.y += ball.dy;
        if(ball.x < 0 || ball.x > canvas.width) ball.dx *= -1;
        if(ball.y < 0) { roundsWon++; ball.dy *= -1; if(roundsWon >= 10) finishGame(); }
        if(ball.y > canvas.height) { ball.y = canvas.height/2; ball.dy = -5; }

        if(ball.y > player.y - 20 && ball.x > player.x - 50 && ball.x < player.x + 50) ball.dy = -Math.abs(ball.dy);
    }
    requestAnimationFrame(update);
}

window.addEventListener('mousemove', (e) => { player.x = e.clientX; });
update();
</script>
</body>
</html>
